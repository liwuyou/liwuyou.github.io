<!DOCTYPE html>
<html lang='en'>

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.20.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://gcore.jsdelivr.net'>
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>Arduino uno 开发 - 无 忧</title>

  
    <meta name="description" content="前言写下此文字时，是24年6月10日，我刚刚结束24年6月1,2日的中国机器人及人工智能大赛的北京市省赛和6号的模电考试，省赛是线下比赛，第一天调试不顺，第二天比赛也是匆匆忙忙，十分混乱。比完后内心感慨，思绪良久。七八号左右出成绩，幸运的是，二队省一，一队三队省二，基本上都可以进国赛。虽然十五号四级，但内心有一种强烈的欲望，想要对自己进行整理，生理上的，心理上的。我开始对我的技术栈进行整理，决定从">
<meta property="og:type" content="article">
<meta property="og:title" content="Arduino uno 开发">
<meta property="og:url" content="http://example.com/2024/09/05/Arduino-uno-%E5%BC%80%E5%8F%91/index.html">
<meta property="og:site_name" content="无 忧">
<meta property="og:description" content="前言写下此文字时，是24年6月10日，我刚刚结束24年6月1,2日的中国机器人及人工智能大赛的北京市省赛和6号的模电考试，省赛是线下比赛，第一天调试不顺，第二天比赛也是匆匆忙忙，十分混乱。比完后内心感慨，思绪良久。七八号左右出成绩，幸运的是，二队省一，一队三队省二，基本上都可以进国赛。虽然十五号四级，但内心有一种强烈的欲望，想要对自己进行整理，生理上的，心理上的。我开始对我的技术栈进行整理，决定从">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051220964.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051222224.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051222836.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051224833.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051226481.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051227206.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051807304.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051809583.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051809922.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072332849.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072331604.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072333602.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072333516.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072334347.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072337206.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072340113.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072340401.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072341985.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072342962.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072342896.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072343715.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072344922.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072344992.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072344397.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409122306191.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409122308389.png">
<meta property="og:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409122309006.png">
<meta property="article:published_time" content="2024-09-05T04:16:54.000Z">
<meta property="article:modified_time" content="2024-09-12T15:17:50.266Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="arduino">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051220964.png">
  
  
  
  <meta name="keywords" content="arduino">

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202406121839794.jpg">
  

  

  


  
</head>

<body>
  




  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202406121839794.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">无 忧</div><div class="sub normal cap">YOU ARE MY ANGLE</div><div class="sub hover cap" style="opacity:0"> I miss you</div></a></div>

<nav class="menu dis-select"><a class="nav-item active" href="/">Blog</a><a class="nav-item" href="/about/">关于</a><a class="nav-item" href="/achievement/">成就</a></nav>
</header>


<div class="widgets">

<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">Arduino uno 开发</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0Arduino-uno%E5%88%9D%E8%AF%86"><span class="toc-text">第一章	Arduino uno初识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1Arduino%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1	Arduino简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2Arduino-%E5%BC%95%E8%84%9A%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.2	Arduino 引脚功能介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3Arduino-%E4%BE%9B%E7%94%B5%E4%B8%8E%E5%8F%96%E7%94%B5"><span class="toc-text">1.3	Arduino 供电与取电</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4Arduino-%E5%BC%95%E8%84%9A%E8%AE%BE%E7%BD%AE"><span class="toc-text">1.4	Arduino 引脚设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1%E6%95%B0%E5%AD%97%E5%BC%95%E8%84%9A"><span class="toc-text">1.4.1数字引脚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2%E6%A8%A1%E6%8B%9F%E5%BC%95%E8%84%9A"><span class="toc-text">1.4.2模拟引脚</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5Arduino%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF"><span class="toc-text">1.5	Arduino串口通讯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-1%E4%B8%B2%E5%8F%A3%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">1.5.1串口初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-2%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE"><span class="toc-text">1.5.2发送数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-3%E6%8E%A5%E5%8F%97%E6%95%B0%E6%8D%AE"><span class="toc-text">1.5.3接受数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-4%E4%B8%B2%E5%8F%A3%E7%BB%BC%E5%90%88"><span class="toc-text">1.5.4串口综合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6Arduino-AREF%E4%B8%8EIOREF%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">1.6	Arduino AREF与IOREF的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7Arduino-%E4%B8%8A%E6%8B%89%E7%94%B5%E9%98%BB"><span class="toc-text">1.7	Arduino 上拉电阻</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8Arduino-%E5%AE%9A%E6%97%B6%E5%99%A8%E8%B5%84%E6%BA%90"><span class="toc-text">1.8	Arduino 定时器资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9%E5%85%B6%E4%BB%96"><span class="toc-text">1.9	其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">第二章	常用模块的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%BA%A2%E5%A4%96%E5%AF%B9%E5%85%89%E7%AE%A1%E7%9A%84%E6%A3%80%E6%B5%8B"><span class="toc-text">2.1 红外对光管的检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E5%85%89%E6%95%8F-%E7%83%AD%E6%95%8F%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9A%84%E6%A3%80%E6%B5%8B"><span class="toc-text">2.2光敏&#x2F;热敏传感器的检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E8%B6%85%E5%A3%B0%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="toc-text">2.3超声波传感器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4PIN-OLED-%E5%B0%8F%E5%B1%8F%E5%B9%95%E7%9A%84%E9%A9%B1%E5%8A%A8"><span class="toc-text">2.4 4PIN-OLED 小屏幕的驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5%E6%B8%A9%E6%B9%BF%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="toc-text">2.5温湿度传感器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6HW504%E6%91%87%E6%9D%86%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">2.6HW504摇杆的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7WIFI%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">2.7WIFI模块的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8%E5%85%B6%E4%BB%96"><span class="toc-text">2.8	其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%E7%94%B5%E6%9C%BA%E7%9A%84%E9%A9%B1%E5%8A%A8"><span class="toc-text">第三章	电机的驱动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1PWM%E6%B3%A2%E7%9A%84%E8%AE%A4%E8%AF%86"><span class="toc-text">3.1PWM波的认识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-PWM%E6%B3%A2%E9%A9%B1%E5%8A%A8%E5%B0%8F%E5%8A%9F%E7%8E%87%E7%9B%B4%E6%B5%81%E7%94%B5%E6%9C%BA"><span class="toc-text">3.2 PWM波驱动小功率直流电机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3L298N%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%8F%8C%E8%B7%AF%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8"><span class="toc-text">3.3	L298N的使用与双路电机驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E8%88%B5%E6%9C%BA%E7%9A%84%E9%A9%B1%E5%8A%A8"><span class="toc-text">3.4舵机的驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%85%B6%E4%BB%96"><span class="toc-text">3.5 其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E6%88%90%E5%93%81%E5%88%B6%E4%BD%9C"><span class="toc-text">第四章	成品制作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E5%8F%AF%E4%BB%A5%E5%88%B6%E4%BD%9C%E5%93%AA%E4%BA%9B%EF%BC%9F%E5%A6%82%E4%BD%95%E5%88%B6%E4%BD%9C%EF%BC%9F"><span class="toc-text">4.1可以制作哪些？如何制作？</span></a></li></ol></li></ol></div></div></widget>



<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" placeholder="Search"><svg t="1670596976048" class="icon search-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"></path></svg></form><div id="search-result"></div><div class="search-no-result">No Results!</div></div></div></widget>


</div>


    </aside>
    <div class='l_main'>
      

      



<div class="bread-nav fs12"><div class="left"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a><span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a></div><div id="post-meta">
    <span>Posted on&nbsp;<time datetime="2024-09-05T04:16:54.000Z">2024-09-05</time></span>
    
    <span>Updated on&nbsp;<time datetime="2024-09-12T15:17:50.266Z">2024-09-12</time></span>
    </div></div></div>

<article class='md-text content post'>
<h1 class="article-title"><span>Arduino uno 开发</span></h1>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>写下此文字时，是24年6月10日，我刚刚结束24年6月1,2日的中国机器人及人工智能大赛的北京市省赛和6号的模电考试，省赛是线下比赛，第一天调试不顺，第二天比赛也是匆匆忙忙，十分混乱。比完后内心感慨，思绪良久。七八号左右出成绩，幸运的是，二队省一，一队三队省二，基本上都可以进国赛。虽然十五号四级，但内心有一种强烈的欲望，想要对自己进行整理，生理上的，心理上的。我开始对我的技术栈进行整理，决定从最简单的auduino开始，这也是我写下本文的初衷，对知识进行整理。<br>本文大概分为四个部分，第一部分，arduino基础知识学习，第二部分，外设的使用，第三部分，电机的驱动，第四部分，实战。第三部分按理应放在第二部分，但个人认为电机驱动部分相对重要，就单列一部分了。我将遵循简约，准确的原则开始编写本文。本文并不针对初学者，需要一些C语言知识，电学知识作为前置知识，本文不介绍此部分。<br>本文使用了chat，加速本文的开发。</p>
<h2 id="第一章Arduino-uno初识"><a href="#第一章Arduino-uno初识" class="headerlink" title="第一章	Arduino uno初识"></a>第一章	Arduino uno初识</h2><h3 id="1-1Arduino简介"><a href="#1-1Arduino简介" class="headerlink" title="1.1	Arduino简介"></a>1.1	Arduino简介</h3><p>Arduino 旗下系类有很多，其中用途广泛的有四种，Arduino UNO，Arduino mega 2560,Arduino nano,Arduino uno wifi.</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051220964.png"/></div></div>
<p>顺序从左到右对应。<br>Arduino UNO为通用型号，mega 2560引脚多，功能更强大，Arduino nano,板子小巧，质量轻，体积小，Arduino UNO wifi,多了个wifi功能，建议别用，直接用esp32.<br>本文主要针对的是arduino uno进行开发介绍。<br>中文网站如下    </p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://arduino.nxez.com/">https://arduino.nxez.com/</a></p>
</blockquote>
<h3 id="1-2Arduino-引脚功能介绍"><a href="#1-2Arduino-引脚功能介绍" class="headerlink" title="1.2	Arduino 引脚功能介绍"></a>1.2	Arduino 引脚功能介绍</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051222224.png"/></div></div>
<p>引脚分为5个区，区域如下  </p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051222836.png"/></div></div>

<p><strong>1区为引脚供电区，</strong><br>-	IORES,输入输出参考电压<br>-	RESET,复位引脚，默认输出为1，下拉即可复位。<br>-	3.3V和5V是供电引脚，uno可通过USB输入电源,<br>此时，3.3V和5V可对外供电，也可通过3.3V和5V<br>对单片机进行供电，不使用usb供电<br>-	GND,地线<br>-	Vin,外部电源为开发板供电</p>
<p><strong>2区为模拟口引脚区(analog)</strong><br>ADC表示模拟到数字转换器。 ADC是用于将模拟信号<br>转换为数字信号的电子电路。模拟信号的这种数字表示<br>允许处理器（其是数字设备）测量模拟信号并在其操作中使用它。    </p>
<p>Arduino引脚A0-A5能够读取模拟电压。在Arduino上，ADC具有10位分辨率，这意味着它可以通过1,024个数字电平表示模拟电压。 ADC将电压转换成微处理器可以理解的位。<br>模拟引脚只能模拟输入，不能模拟输出。<br><strong>3区为ICSP插头接口区</strong>   </p>
<p><strong>4区为同3区，部分板子无此区域</strong><br><strong>5区为数字引脚区(digital)</strong><br>Arduino Uno的引脚0-13用作数字输入&#x2F;输出引脚。其中，引脚13连接到板载的LED灯；<br>引脚3、5、6、9、10、11具有PWM功能</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051224833.png"/></div></div>
<p>以下是 Arduino Uno 的一些关键硬件规格：<br>•	微控制器：ATmega328P<br>•	工作电压：5V<br>•	输入电压（推荐）：7-12V<br>•	输入电压（限制）：6-20V<br>•	数字I&#x2F;O引脚：14（其中6个提供PWM输出）<br>•	模拟输入引脚：6<br>•	每个I&#x2F;O引脚的直流电流：20 mA<br>•	3.3V引脚的直流电流：50 mA<br>•	闪存：32 KB（ATmega328P），其中0.5 KB用于引导加载程序<br>•	SRAM：2 KB（ATmega328P）<br>•	EEPROM：1 KB（ATmega328P）<br>•	时钟速度：16 MHz  </p>
<h3 id="1-3Arduino-供电与取电"><a href="#1-3Arduino-供电与取电" class="headerlink" title="1.3	Arduino 供电与取电"></a>1.3	Arduino 供电与取电</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051226481.png"/></div></div>
<p>Arduion UNO 的供电方式有四种<br>1.	USB接口供电（5V）<br>2.	外部电源接口供电，直流电源电压必须为7V ~ 12V<br>3.	Vin供电引脚供电，供电电压7~12V<br>4.	5V引脚5V供电。</p>
<p>注意通过VIN引脚供电，有一定可能性造成降压芯片烧毁，所以，如果电源12V，走外部电源接口供电，如果电源5V，走5V引脚供电。</p>
<p>3.3V无法通过3.3V引脚供电，会造成单片机工作异常。</p>
<p>大功率用电模块不要走单片机的引脚供电，一方面，供电不足，另一方面，可能造成烧毁或异常。</p>
<h3 id="1-4Arduino-引脚设置"><a href="#1-4Arduino-引脚设置" class="headerlink" title="1.4	Arduino 引脚设置"></a>1.4	Arduino 引脚设置</h3><p>打开Arduino的开发IDE,插上arduino,使用USB接口,另一端接入电脑，选择端口和开发板。IDE的安装和端口选择及中文语言选择自行百度，这里略过。IDE如下。</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051227206.png"/></div></div>
<p>Setup(){}函数为初始化函数，会在arduino开机时执行一次。<br>Loop(){}函数为循环函数，主程序会在这里循环执行。   </p>
<p>我们在这里学习数字和模拟引脚的设置。    </p>
<h4 id="1-4-1数字引脚"><a href="#1-4-1数字引脚" class="headerlink" title="1.4.1数字引脚"></a>1.4.1数字引脚</h4><p>数字引脚即可以输入也可以输出。该类引脚有两种状态，高电平(1)与低电平(0)，高低电平的确定由参考电压(AREF)确定。每个数字I&#x2F;O口（input,输入，output，输出）可提供最高40mA的电流和5V的电压。<br>数字I&#x2F;O口定义函数。   </p>
<blockquote>
<p>pinMode(pin,mode)   </p>
</blockquote>
<p>pinMode()函数为数字引脚定义函数，第一个参数pin,为引脚标号，即要设置那个引脚，范围为0-13，即数字引脚区。Mode有三种模式，INPUT(输入)，INPUT_PULLUP(带上拉电阻输入)，OUTPUT(输出)。   </p>
<blockquote>
<p> digitalWrite(pin,mode);</p>
</blockquote>
<p>设置引脚输出状态后，可用digitalWrite函数设置引脚置为0还是1，不设置的话默认为LOW,低电平。第一个参数为引脚标号，第二个参数为状态，LOW或者HIGH;   </p>
<blockquote>
<p> digitalRead(pin);</p>
</blockquote>
<p>digitalRead(pin)该函数为读取引脚状态，返回值为int型。结果为HIGH,LOW。<br>注意：在进行读取引脚操作前，需先对引脚输入模式进行定义   </p>
<h4 id="1-4-2模拟引脚"><a href="#1-4-2模拟引脚" class="headerlink" title="1.4.2模拟引脚"></a>1.4.2模拟引脚</h4><p>使用模拟引脚时，在模拟方面只能模拟输入无法模拟输出。    </p>
<blockquote>
<p> int b&#x3D;analogRead(A0);</p>
</blockquote>
<p>A0为模拟口的一个引脚，可替换为A0，A1- A5;<br>返回值为0-1023一个数字，模拟引脚内置10位A&#x2F;D转换器，能将0~5V的电压转换为0-1023的数值，读取精度为5V&#x2F;210即，每单位4.9mV.<br>模拟口也可作为数字引脚使用。使用如下   </p>
<blockquote>
<p> pinMode(A0,OUTPUT);<br>  digitalWrite(A0,HIGH);  </p>
</blockquote>
<p>A0<del>A5也可用14-19表示。<br>1.4.2PWM引脚<br>在数字引脚上，我们可以观察到有的数字引脚旁边带</del>号，这说明此引脚具有PWM输出的功能。如何使用这些引脚输出PWM波呢？<br>首先，这些引脚是数字引脚区，应先设置引脚输出状态，再设置PWM波的占空比。   </p>
<blockquote>
<p> pinMode(3,OUTPUT);<br>  analogWrite(3,100); </p>
</blockquote>
<p>通过anglogWrite(pin,Value);设置占空比，占空比范围为0-255。PWM波不是模拟输出，arduino的PWM波输出频率较低，一千Hz以内，后续再详细介绍PWM.   </p>
<h3 id="1-5Arduino串口通讯"><a href="#1-5Arduino串口通讯" class="headerlink" title="1.5	Arduino串口通讯"></a>1.5	Arduino串口通讯</h3><p>通过USB线将板子和计算机连接，可实现串口通讯，UNO的硬件串口资源仅有一个，一个串口资源，仅支持1对1，板子与计算机通讯时不要使用其他模块占用此通道，否则可能造成串口传输乱码，或者下载失败。<br>本小节仅讨论计算机与板子的串口操作，串口的其他操作后续内容后面章节补充   </p>
<h4 id="1-5-1串口初始化"><a href="#1-5-1串口初始化" class="headerlink" title="1.5.1串口初始化"></a>1.5.1串口初始化</h4><p>使用 Serial.begin(baudRate) 函数来初始化串口通信，参数 baudRate 是波特率（数据传输速率），常见值是 9600, 115200 。初始化内容一般放在setup函数里。如下。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);  <span class="comment">// 初始化串口通信，波特率为9600</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-5-2发送数据"><a href="#1-5-2发送数据" class="headerlink" title="1.5.2发送数据"></a>1.5.2发送数据</h4><p>•  Serial.print(data)：发送数据，但不换行。<br>•  Serial.println(data)：发送数据并换行。<br>可用串口接收器接受。</p>
<h4 id="1-5-3接受数据"><a href="#1-5-3接受数据" class="headerlink" title="1.5.3接受数据"></a>1.5.3接受数据</h4><p>•  Serial.available()：返回串口缓冲区中的字节数。<br>•  Serial.read()：读取串口缓冲区中的一个字节，返回值为 -1 表示没有数据可读。<br>•  Serial.readString()：读取串口缓冲区中的字符串，直到超时（需要 Serial.setTimeout() 配合）。<br>•  Serial.readStringUntil(char terminator)：读取串口缓冲区中的字符串，直到遇到终止符（如换行符）。<br>Serial.setTimeout(500);  &#x2F;&#x2F; 设置超时为500毫秒   </p>
<h4 id="1-5-4串口综合"><a href="#1-5-4串口综合" class="headerlink" title="1.5.4串口综合"></a>1.5.4串口综合</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);  <span class="comment">// 初始化串口，波特率为9600</span></span><br><span class="line">  Serial.setTimeout(<span class="number">1000</span>);  <span class="comment">// 设置读取操作的超时时间为5秒，可注释</span></span><br><span class="line">  Serial.println(<span class="string">&quot;Enter a string (timeout 5 seconds):&quot;</span>); <span class="comment">//提示用户输入字符串</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// 检查是否有数据可读</span></span><br><span class="line">  <span class="keyword">if</span> (Serial.available() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    String receivedString = Serial.readString();  <span class="comment">// 读取串口缓冲区中的字符串</span></span><br><span class="line">    Serial.print(<span class="string">&quot;You entered: &quot;</span>);</span><br><span class="line">    Serial.println(receivedString);  <span class="comment">// 打印接收到的字符串</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  delay(<span class="number">500</span>);  <span class="comment">// 延迟500毫秒</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>操作时，要注意程序运行在uno上，主体是单片机而不是计算机。</p>
<h3 id="1-6Arduino-AREF与IOREF的使用"><a href="#1-6Arduino-AREF与IOREF的使用" class="headerlink" title="1.6	Arduino AREF与IOREF的使用"></a>1.6	Arduino AREF与IOREF的使用</h3><p>部分arduino的板子的IOREF引脚会该成5V供电引脚 ,查阅原理图，IOREF被锁死。</p>
<p>AREF<br>在mega328中，有六个模拟输入引脚，这些模拟输入引脚简单的说测量的是输入的电压值然后用 0~ 1023来表示电压的大小，当然，这个值有一个范围，通常来说是0~5V，查阅UNO的规格书可以知道UNO是具有10位的ADC。</p>
<p>10位ADC以为着什么呢？以为着它能将0 ~ 5 V的电压分成1024份（2^10），算出来即为4.882mV的测量精度，举个例子就是0V的时候测量结果为0，5V为1023，3V约为615，但是有一种情况就是你输入的电压最大是3.3V，测量出来的最大值也就是675，这个时候你或许会想到map，确实这不失为一个好办法。</p>
<p>但是AREF提供了另一个更好的解决办法，即在AREF接入一个最大模拟输入量作为参考值（比如上面所说的3V3），这样不仅能直接读到1023，更为重要的是精度提高，用3V3作为AREF的时候精度是多少？？ 3.3&#x2F;1023 &#x3D;&#x3D;3.223mV，测量精度提高了。</p>
<p>使用外部电源注意事项：<br>-	确保外部参考电压在 0 到 Vcc 之间，对于 5V Arduino 板，电压应在 0 到 5V 之间。<br>-	外部参考电压不应超过 Vcc，否则可能会损坏 Arduino 板。<br>-	使用一个稳定的电压源作为外部参考电压。如果外部参考电压不稳定，ADC 的精度会受到影响。<br>-	如果已经连接了外部参考电压，不要在代码中使用 analogReference(DEFAULT); 或 analogReference(INTERNAL);。这样可能会引起冲突和不正确的读数。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">  analogReference(EXTERNAL); <span class="comment">// 使用外部参考电压</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">int</span> a = analogRead(A0);</span><br><span class="line">  Serial.println(a);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-7Arduino-上拉电阻"><a href="#1-7Arduino-上拉电阻" class="headerlink" title="1.7	Arduino 上拉电阻"></a>1.7	Arduino 上拉电阻</h3><p>上拉电阻是什么？在I&#x2F;O口模式设置中，输入模式有两种，INPUT和INPUT_PULLUP,这两者有什么区别吗？<br>本节将解答上面的问题。<br>输入模式的引脚相当于电压表的探头，如果测得电压比基准电压高，则为1，比基准电压低为0；<br>首先我们要了解一个概念，引脚悬空，即当某个引脚处于输入模式时，而该引脚什么也没有接的情况称之为引脚悬空。灵魂画手上线，如下图。   </p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051807304.png"/></div></div>
<p>引脚悬空会有什么问题呢？会造成读取的引脚状态不对，此时是高电平还是低电平呢？无法确定。   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">  pinMode(<span class="number">2</span>,INPUT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  delay(<span class="number">50</span>);</span><br><span class="line">  <span class="type">int</span> a =digitalRead(<span class="number">2</span>);</span><br><span class="line">  Serial.println(a);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打印结果如下，特别是将手指捏在悬空引脚尤为明显。</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051809583.png"/></div></div>
<p>而将引脚模式设置为输入上拉后，输出不飘了，为1.</p>
<blockquote>
<p>pinMode(2,INPUT_PULLUP);</p>
</blockquote>
<p>Arduino内部的上拉电阻为20K欧，一般上拉电阻为10K欧</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409051809922.png"/></div></div>
<p>此时引脚不接东西时，测的电压为VCC,即高电平，上拉电阻阻值较大，能够限流，防止大电流灌入引脚。当引脚接GND时，此时pin测的电压为GND的电压，为低电平。<br>不使用单片机的内置上拉电阻，自行在输入引脚外接一个阻值大小合适电阻是相同的效果。上拉电阻稳定输入引脚状态，克服了引脚悬空带来的引脚测量值不准的问题。</p>
<h3 id="1-8Arduino-定时器资源"><a href="#1-8Arduino-定时器资源" class="headerlink" title="1.8	Arduino 定时器资源"></a>1.8	Arduino 定时器资源</h3><p>Arduino Uno 基于 ATmega328P 微控制器，该微控制器包含三个硬件定时器资源：Timer0、Timer1 和 Timer2。每个定时器有不同的特性和用途，具体如下：</p>
<p>Timer0<br>类型：8位定时器<br>用途：主要用于 Arduino 内部计时功能，例如 millis() 和 delay() 函数。它可以生成中断，用于更新系统时间。尽量不要更改这个定时器。<br>PWM 引脚：5和 6（对应 Arduino 引脚）<br>Timer1<br>类型：16位定时器<br>用途：由于其较高的分辨率，Timer1 常用于需要精确时间控制的任务，例如 Servo 库。它也可以生成高精度的 PWM 信号。<br>PWM 引脚：9 和 10（对应 Arduino 引脚）<br>Timer2<br>类型：8位定时器<br>用途：通常用于生成较低频率的 PWM 信号或执行其他定时任务。其频率设置比较灵活，适用于音频生成等应用。<br>PWM 引脚：3 和 11（对应 Arduino 引脚）   </p>
<p>中断频率（Hz）&#x3D;（Arduino时钟速度16MHz）&#x2F;（预分频器*（比较匹配寄存器+ 1）)   </p>
<p>WGM02、WGM01、WGM00：这三个位用于选择相位校正（phase correct）模式、快速（Fast）模式或CTC模式。<br>相位校正模式：计数器在达到最大值（255）后开始减小，形成一个三角形波形。<br>快速模式：计数器达到最大值后归零，形成锯齿波形。<br>CTC模式：计数器在达到OCR0A（比较寄存器A）后归零，形成可变的锯齿波形。<br>CS02、CS01、CS00：用于控制预分频系数，即将系统时钟分频得到计时器时钟。<br>分频系数1：无分频。<br>分频系数8：系统时钟除以8。<br>比较寄存器A、B：除了设置定时器外，还有两个寄存器用于控制PWM比较值，从而控制占空比。<br>COM0A1、COM0A0、COM0B1、COM0B0：用于设置PWM输出引脚的电平。<br>COM0A1&#x2F;COM0B1、COM0A0&#x2F;COM0B0为1、1时，当OCR比较寄存器小于计数器值时引脚输出0，大于计数器值时输出1。<br>COM0A1&#x2F;COM0B1、COM0A0&#x2F;COM0B0为1、0时，当OCR比较寄存器小于计数器值时引脚输出1，大于计数器值时输出0。<br>CTC模式下，COM0A1&#x2F;COM0B1、COM0A0&#x2F;COM0B0为0、1时，每当计数器溢出，引脚输出取反。   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> toggle0, toggle1, toggle2;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  cli(); <span class="comment">// 关闭全局中断</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置定时器0为10kHz(100us)</span></span><br><span class="line">  TCCR0A = <span class="number">0</span>; <span class="comment">// 将整个TCCR0A寄存器设置为0</span></span><br><span class="line">  TCCR0B = <span class="number">0</span>; <span class="comment">// 将整个TCCR0B寄存器设置为0</span></span><br><span class="line">  TCNT0 = <span class="number">0</span>; <span class="comment">// 将计数器值初始化为0</span></span><br><span class="line">  <span class="comment">// 设置计数器为10kHz，即100us</span></span><br><span class="line">  OCR0A = <span class="number">24</span>; <span class="comment">// 比较匹配寄存器 = [16,000,000Hz /（预分频器 * 所需中断频率）] - 1</span></span><br><span class="line">              <span class="comment">// 比较匹配寄存器 = 24, 中断间隔 = 100us 即中断频率10kHz</span></span><br><span class="line">  TCCR0A |= (<span class="number">1</span> &lt;&lt; WGM01); <span class="comment">// 打开CTC模式</span></span><br><span class="line">  TCCR0B |= (<span class="number">1</span> &lt;&lt; CS01) | (<span class="number">1</span> &lt;&lt; CS00); <span class="comment">// 设置CS01位为1，CS00位为1(64倍预分频)</span></span><br><span class="line">  TIMSK0 |= (<span class="number">1</span> &lt;&lt; OCIE0A); <span class="comment">// 启用定时器比较中断</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置定时器1为1kHz</span></span><br><span class="line">  TCCR1A = <span class="number">0</span>; <span class="comment">// 将整个TCCR1A寄存器设置为0</span></span><br><span class="line">  TCCR1B = <span class="number">0</span>; <span class="comment">// 将整个TCCR1B寄存器设置为0</span></span><br><span class="line">  TCNT1 = <span class="number">0</span>; <span class="comment">// 将计数器值初始化为0</span></span><br><span class="line">  <span class="comment">// 设置计数器为1kHz，即1ms</span></span><br><span class="line">  OCR1A = <span class="number">1999</span>; <span class="comment">// = (16*10^6)/(1000*8) - 1 (must be &lt;65536)</span></span><br><span class="line">  TCCR1B |= (<span class="number">1</span> &lt;&lt; WGM12); <span class="comment">// 打开CTC模式</span></span><br><span class="line">  TCCR1B |= (<span class="number">1</span> &lt;&lt; CS11); <span class="comment">// 设置CS11位为1(8倍预分频)</span></span><br><span class="line">  TIMSK1 |= (<span class="number">1</span> &lt;&lt; OCIE1A); <span class="comment">// 启用定时器比较中断</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置定时器2为8kHz</span></span><br><span class="line">  TCCR2A = <span class="number">0</span>; <span class="comment">// 将整个TCCR2A寄存器设置为0</span></span><br><span class="line">  TCCR2B = <span class="number">0</span>; <span class="comment">// 将整个TCCR2B寄存器设置为0</span></span><br><span class="line">  TCNT2 = <span class="number">0</span>; <span class="comment">// 将计数器值初始化为0</span></span><br><span class="line">  <span class="comment">// 设置计数器为8kHz</span></span><br><span class="line">  OCR2A = <span class="number">249</span>; <span class="comment">// = (16*10^6) / (8000*8) - 1 (must be &lt;256)</span></span><br><span class="line">  TCCR2A |= (<span class="number">1</span> &lt;&lt; WGM21); <span class="comment">// 打开CTC模式</span></span><br><span class="line">  TCCR2B |= (<span class="number">1</span> &lt;&lt; CS21); <span class="comment">// 设置CS21位为1(8倍预分频)</span></span><br><span class="line">  TIMSK2 |= (<span class="number">1</span> &lt;&lt; OCIE2A); <span class="comment">// 启用定时器比较中断</span></span><br><span class="line"></span><br><span class="line">  sei(); <span class="comment">// 打开全局中断</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中断0服务函数</span></span><br><span class="line">ISR(TIMER0_COMPA_vect) &#123; <span class="comment">// timer0中断，产生频率为10kHz / 2 = 5kHz的脉冲波</span></span><br><span class="line">  <span class="keyword">if</span> (toggle0) &#123;</span><br><span class="line">    digitalWrite(<span class="number">8</span>, HIGH);</span><br><span class="line">    toggle0 = <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    digitalWrite(<span class="number">8</span>, LOW);</span><br><span class="line">    toggle0 = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中断1服务函数</span></span><br><span class="line">ISR(TIMER1_COMPA_vect) &#123; <span class="comment">// timer1中断，产生频率为2Hz / 2 = 1Hz的脉冲波</span></span><br><span class="line">  <span class="keyword">if</span> (toggle1 &gt;= <span class="number">500</span>) &#123;</span><br><span class="line">    digitalWrite(<span class="number">13</span>, HIGH);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (toggle1 &lt;= <span class="number">500</span>) &#123;</span><br><span class="line">    digitalWrite(<span class="number">13</span>, LOW);</span><br><span class="line">  &#125;</span><br><span class="line">  toggle1 += <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (toggle1 &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">    toggle1 = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中断2服务函数</span></span><br><span class="line">ISR(TIMER2_COMPA_vect) &#123; <span class="comment">// timer2中断，产生频率为8kHz / 2 = 4kHz的脉冲波</span></span><br><span class="line">  <span class="keyword">if</span> (toggle2) &#123;</span><br><span class="line">    digitalWrite(<span class="number">9</span>, HIGH);</span><br><span class="line">    toggle2 = <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    digitalWrite(<span class="number">9</span>, LOW);</span><br><span class="line">    toggle2 = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 主循环函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-9其他"><a href="#1-9其他" class="headerlink" title="1.9	其他"></a>1.9	其他</h3><p>板间通讯。<br>如果想对板子进行更细致的操作，建议更换STM32,或者其他单片机。</p>
<h2 id="第二章常用模块的使用"><a href="#第二章常用模块的使用" class="headerlink" title="第二章	常用模块的使用"></a>第二章	常用模块的使用</h2><h3 id="2-1-红外对光管的检测"><a href="#2-1-红外对光管的检测" class="headerlink" title="2.1 红外对光管的检测"></a>2.1 红外对光管的检测</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072332849.png"/></div></div>
<p>应用场合：<br>     1.电度表脉冲数据采样<br>     2.传真机碎纸机纸张检测<br>     3.障碍检测<br>     4.黑白线检测  </p>
<p>DO 为数字输出口<br>AO为模拟输出口<br>可5V或3.3V供电。  </p>
<p>中间的螺旋可以调节探测的距离。<br>当红外接收器接受到信号时，开光指示灯亮起。DO为低电平，检测这个端口的值，即可知道探测状态。   </p>
<p>测试<br>5V供电，DO引脚接3号，AO接A0   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  pinMode(<span class="number">3</span>,INPUT_PULLUP);<span class="comment">//使用三号数字引脚探测DO</span></span><br><span class="line">  Serial.begin(<span class="number">115200</span>);  <span class="comment">// 初始化串口，波特率为115200</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">  <span class="type">int</span> a = digitalRead(<span class="number">3</span>); <span class="comment">//变量a接受数字值</span></span><br><span class="line">  <span class="type">int</span> b = analogRead(A0); <span class="comment">//变量b接受模拟值</span></span><br><span class="line">  Serial.println(a);</span><br><span class="line">  Serial.println(b);</span><br><span class="line">  delay(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当开关灯亮时，一个模拟值，一个数字值。串口显示器显示如下</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072331604.png"/></div></div>

<h3 id="2-2光敏-热敏传感器的检测"><a href="#2-2光敏-热敏传感器的检测" class="headerlink" title="2.2光敏&#x2F;热敏传感器的检测"></a>2.2光敏&#x2F;热敏传感器的检测</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072333602.png"/></div></div>   
<p>这里以光敏传感器为例，热敏检查代码相同。<br>应用场景<br>1.	暗室监测<br>2.	熄屏亮灯<br>此类传感器与红外检查方法基本类似，将检测的模拟值，根据<br>实际情况转化为实际量，温度，光照等。</p>
<p>接线：DO接数字引脚2，AO接模拟引脚A0。<br>原理，这两个相当于电阻，电阻值随环境变化而变化。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  pinMode(<span class="number">2</span>,INPUT_PULLUP);</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">int</span> a = digitalRead(<span class="number">2</span>);</span><br><span class="line">  <span class="type">int</span> b = analogRead(A0);</span><br><span class="line">  Serial.print(<span class="string">&quot;a=&quot;</span>);</span><br><span class="line">  Serial.println(a);</span><br><span class="line">  Serial.print(<span class="string">&quot;b=&quot;</span>);</span><br><span class="line">  Serial.println(b);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>读到的模拟量需根据光敏电阻的参数转化为具体的亮度。</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072333516.png"/></div></div>

<h3 id="2-3超声波传感器"><a href="#2-3超声波传感器" class="headerlink" title="2.3超声波传感器"></a>2.3超声波传感器</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072334347.png"/></div></div>
<p>应用场合：<br>1.机器人避障和导航<br>2.距离测量<br>3.接近测量<br>4.智能垃圾桶  </p>
<p>可3.3V或者5V输入</p>
<p>HC-SR04超声波测距模块可提供<br>2cm-60cm的非接触式距离感测功能，<br>测距精度可达高到3mm；模块包括超声波发射器、接收器与控制电路。<br>超声波测距模块——触发信号后发射超声波，当超声波投射到物体而反射回来时，模块输出——回响信号，以触发信号和回响信号间的时间差，来判定物体的距离。<br>使用<br>首先要安装NewPing 库。<br>注意，该库会调用定时器2资源。<br>网上的很多关于超声波模块的教程，不使用定时器，并且使用delay(),会挤占主进程。    </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;NewPing.h&quot;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TRIGGER_PIN  2   <span class="comment">//引脚定义</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ECHO_PIN     3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_DISTANCE 60  <span class="comment">//设置最大距离</span></span></span><br><span class="line">NewPing <span class="title function_">sonar</span><span class="params">(TRIGGER_PIN, ECHO_PIN, MAX_DISTANCE)</span>;</span><br><span class="line"> </span><br><span class="line"><span class="type">float</span> duration, distance;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> iterations = <span class="number">5</span>;  <span class="comment">//求平均的次数</span></span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin (<span class="number">115200</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  duration = sonar.ping_median(iterations);   <span class="comment">//多次测量时间求平均值  </span></span><br><span class="line">  distance = (duration / <span class="number">2</span>) * <span class="number">0.0343</span>;      <span class="comment">//将测量的时间转换成距离 </span></span><br><span class="line"></span><br><span class="line">  Serial.print(<span class="string">&quot;Distance = &quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (distance &gt;= MAX_DISTANCE || distance &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">    Serial.println(<span class="string">&quot;Out of range&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    Serial.print(distance);</span><br><span class="line">    Serial.println(<span class="string">&quot; cm&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>经测试，结果如下</p>
<p>注意，当靠的太近时，距离不准，会增加。本代码对数据只进行求平均处理，可用其他方法进行滤波。减小误差。</p>
<h3 id="2-4-4PIN-OLED-小屏幕的驱动"><a href="#2-4-4PIN-OLED-小屏幕的驱动" class="headerlink" title="2.4 4PIN-OLED 小屏幕的驱动"></a>2.4 4PIN-OLED 小屏幕的驱动</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072337206.png"/></div></div>

<p>应用场景：<br>1.	显示输出<br>2.	多级菜单<br>3.	表情显示</p>
<p>可3.3V或者5V输入，一般使用有多重库函数，<br>这里使用u8g2库<br>SCL接A5,SDA接A4，示例如下</p>
<p>使用：<br>首先要安装u8g2库，该库可以驱动4pin,0.96寸OLED小屏幕</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;U8g2lib.h&gt;</span>                                       <span class="comment">//u8g2库</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SCL A5   <span class="comment">//引脚定义，可替换为数字引脚</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SDA A4</span></span><br><span class="line">U8G2_SSD1306_128X64_NONAME_F_SW_I2C <span class="title function_">u8g2</span><span class="params">(U8G2_R0,SCL,SDA)</span>; <span class="comment">//配置构造函数      </span></span><br><span class="line"><span class="type">int</span> a=<span class="number">66</span>;                                                  <span class="comment">//定义变量a=66</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">    u8g2.begin();                                          <span class="comment">//启动u8g2驱动程序</span></span><br><span class="line">    u8g2.clearBuffer();                                    <span class="comment">//清空显示屏缓存</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">    face();                                                <span class="comment">//调用函数，显示图案</span></span><br><span class="line">    delay(<span class="number">1000</span>);                                           <span class="comment">//持续一秒钟</span></span><br><span class="line">    heart();                                               <span class="comment">//调用函数，显示英文字母和图案</span></span><br><span class="line">    delay(<span class="number">1000</span>);                                           <span class="comment">//持续一秒钟</span></span><br><span class="line">    letter(a);                                             <span class="comment">//调用函数，显示中文和变量</span></span><br><span class="line">    delay(<span class="number">1000</span>);                                           <span class="comment">//持续一秒钟</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">face</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    u8g2.clearBuffer();                                    <span class="comment">//清空显示屏缓存</span></span><br><span class="line">    </span><br><span class="line">    u8g2.drawCircle(<span class="number">56</span>,<span class="number">40</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_LEFT);         <span class="comment">//画四分之一圆，圆心坐标（56,44），半径8</span></span><br><span class="line">    u8g2.drawCircle(<span class="number">56</span>,<span class="number">40</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_RIGHT);        <span class="comment">//画四分之一圆</span></span><br><span class="line">    u8g2.drawCircle(<span class="number">72</span>,<span class="number">40</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_LEFT);         <span class="comment">//画四分之一圆</span></span><br><span class="line">    u8g2.drawCircle(<span class="number">72</span>,<span class="number">40</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_RIGHT);        <span class="comment">//画四分之一圆</span></span><br><span class="line">    u8g2.drawCircle(<span class="number">56</span>,<span class="number">41</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_LEFT);         <span class="comment">//加粗画四分之一圆</span></span><br><span class="line">    u8g2.drawCircle(<span class="number">56</span>,<span class="number">41</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_RIGHT);        <span class="comment">//加粗画四分之一圆</span></span><br><span class="line">    u8g2.drawCircle(<span class="number">72</span>,<span class="number">41</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_LEFT);         <span class="comment">//加粗画四分之一圆</span></span><br><span class="line">    u8g2.drawCircle(<span class="number">72</span>,<span class="number">41</span>,<span class="number">8</span>,U8G2_DRAW_LOWER_RIGHT);        <span class="comment">//加粗画四分之一圆</span></span><br><span class="line">    u8g2.drawLine(<span class="number">40</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">30</span>);                            <span class="comment">//画斜线，两端点坐标分别是（40，18）（20,30）</span></span><br><span class="line">    u8g2.drawLine(<span class="number">88</span>,<span class="number">18</span>,<span class="number">108</span>,<span class="number">30</span>);                           <span class="comment">//画斜线</span></span><br><span class="line">    u8g2.drawLine(<span class="number">40</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">29</span>);                            <span class="comment">//加粗画斜线</span></span><br><span class="line">    u8g2.drawLine(<span class="number">88</span>,<span class="number">17</span>,<span class="number">108</span>,<span class="number">29</span>);                           <span class="comment">//加粗画斜线</span></span><br><span class="line">    </span><br><span class="line">    u8g2.sendBuffer();                                     <span class="comment">//加载以上内容</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="type">void</span> <span class="title function_">heart</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    u8g2.clearBuffer();                                    <span class="comment">//清空显示屏缓存</span></span><br><span class="line">    </span><br><span class="line">    u8g2.setFont(<span class="type">u8g2_font_open_iconic_human_2x_t</span>);        <span class="comment">// 设置字体</span></span><br><span class="line">    u8g2.drawGlyph(<span class="number">58</span>,<span class="number">30</span>,<span class="number">66</span>);                              <span class="comment">// 画心，符号左下角坐标为（58,36），符号编号为66</span></span><br><span class="line">    u8g2.setFont(u8g2_font_unifont_t_chinese2);            <span class="comment">//设置字体</span></span><br><span class="line">    u8g2.drawUTF8(<span class="number">58</span>+<span class="number">20</span>,<span class="number">30</span>,<span class="string">&quot;ZFY&quot;</span>);                         <span class="comment">//显示英文，左下角位置坐标为（78，30）</span></span><br><span class="line">    u8g2.drawUTF8(<span class="number">58</span><span class="number">-14</span><span class="number">-16</span>,<span class="number">30</span>,<span class="string">&quot;JHR&quot;</span>);                      <span class="comment">//显示英文，左下角位置坐标为（28，30）    </span></span><br><span class="line">    </span><br><span class="line">    u8g2.sendBuffer();                                     <span class="comment">// 加载以上内容</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="type">void</span> <span class="title function_">letter</span><span class="params">(<span class="type">int</span> a)</span></span><br><span class="line">&#123;   </span><br><span class="line">    u8g2.clearBuffer();                                    <span class="comment">//清空显示屏缓存</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//int8_t a=u8g2.getMaxCharHeight();                      //获取最大高度</span></span><br><span class="line">    <span class="comment">//int8_t b=u8g2.getMaxCharWidth();                       //获取最大宽度</span></span><br><span class="line">    </span><br><span class="line">    u8g2.setFont(u8g2_font_unifont_t_chinese2);            <span class="comment">//设置字体</span></span><br><span class="line">    u8g2.drawUTF8(<span class="number">20</span>,<span class="number">17</span>,<span class="string">&quot;智能检测系统&quot;</span>);                    <span class="comment">//显示文字，左下角位置坐标为（20，17）</span></span><br><span class="line">    u8g2.drawUTF8(<span class="number">50</span>,<span class="number">34</span>,<span class="string">&quot;：&quot;</span>);                             <span class="comment">//显示:，左下角坐标为（50,34）</span></span><br><span class="line">    u8g2.drawUTF8(<span class="number">0</span>,<span class="number">34</span>,<span class="string">&quot;位移为:&quot;</span>);</span><br><span class="line">    u8g2.setCursor(<span class="number">64</span>,<span class="number">34</span>);                                 <span class="comment">//设置将要打印变量的左下角坐标</span></span><br><span class="line">    u8g2.drawUTF8(<span class="number">0</span>,<span class="number">34</span>,<span class="string">&quot;位移为:&quot;</span>);</span><br><span class="line"></span><br><span class="line">    u8g2.print(a);                                         <span class="comment">//打印变量a</span></span><br><span class="line">     </span><br><span class="line">    u8g2.sendBuffer();                                     <span class="comment">// 加载以上内容</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>屏幕显示还有ISP协议的，这种一般为7PIN，这里只介绍相对简单，接线少，使用I2C协议的4pin,0.96寸OLED屏幕。</p>
<h3 id="2-5温湿度传感器"><a href="#2-5温湿度传感器" class="headerlink" title="2.5温湿度传感器"></a>2.5温湿度传感器</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072340113.png"/></div></div>

<p>使用DHT11，温湿度传感器还有其他类型DHT22等<br>应用场景<br>1.	温湿度检测<br>2.	小闹钟配件</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072340401.png"/></div></div>

<p>引脚正对着自己，从左至右。</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072341985.png"/></div></div>

<p>使用，安装库Adafruit Unified Sensor及DHT-sensor-library两个库</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要以下 Arduino 库：</span></span><br><span class="line"><span class="comment">// - DHT 传感器库：https://github.com/adafruit/DHT-sensor-library</span></span><br><span class="line"><span class="comment">// - Adafruit 统一传感器库：https://github.com/adafruit/Adafruit_Sensor</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;DHT.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DHTPIN 2    <span class="comment">// 连接到 DHT 传感器的数字引脚</span></span></span><br><span class="line"><span class="comment">// Feather HUZZAH ESP8266 注意：使用引脚 3, 4, 5, 12, 13 或 14 --</span></span><br><span class="line"><span class="comment">// 引脚 15 也可以使用，但在上传程序时必须断开 DHT 连接。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消注释你正在使用的传感器类型！</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DHTTYPE DHT11   <span class="comment">// DHT 11</span></span></span><br><span class="line"><span class="comment">//#define DHTTYPE DHT22   // DHT 22  (AM2302), AM2321</span></span><br><span class="line"><span class="comment">//#define DHTTYPE DHT21   // DHT 21 (AM2301)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将传感器的引脚 1（左边的）连接到 +5V</span></span><br><span class="line"><span class="comment">// 注意：如果使用 3.3V 逻辑电平的板子（如 Arduino Due），将引脚 1 连接到 3.3V 而不是 5V！</span></span><br><span class="line"><span class="comment">// 将传感器的引脚 2 连接到 DHTPIN</span></span><br><span class="line"><span class="comment">// 将传感器的引脚 3（右边的）连接到 GND（如果传感器有 3 个引脚）</span></span><br><span class="line"><span class="comment">// 将传感器的引脚 4（右边的）连接到 GND，并且引脚 3 空置（如果传感器有 4 个引脚）</span></span><br><span class="line"><span class="comment">// 将一个 10K 电阻从传感器的引脚 2（数据）连接到引脚 1（电源）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化 DHT 传感器。</span></span><br><span class="line"><span class="comment">// 注意：旧版本的库有一个可选的第三参数来调整较快处理器的时序。</span></span><br><span class="line"><span class="comment">// 现在不再需要这个参数，因为当前的 DHT 读取算法会自适应较快的处理器。</span></span><br><span class="line">DHT <span class="title function_">dht</span><span class="params">(DHTPIN, DHTTYPE)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line">  Serial.println(F(<span class="string">&quot;DHTxx test!&quot;</span>));</span><br><span class="line"></span><br><span class="line">  dht.begin();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// Wait a few seconds between measurements.</span></span><br><span class="line">  delay(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Reading temperature or humidity takes about 250 milliseconds!</span></span><br><span class="line">  <span class="comment">// Sensor readings may also be up to 2 seconds &#x27;old&#x27; (its a very slow sensor)</span></span><br><span class="line">  <span class="type">float</span> h = dht.readHumidity();</span><br><span class="line">  <span class="comment">// Read temperature as Celsius (the default)</span></span><br><span class="line">  <span class="type">float</span> t = dht.readTemperature();</span><br><span class="line">  <span class="comment">// Read temperature as Fahrenheit (isFahrenheit = true)</span></span><br><span class="line">  <span class="type">float</span> f = dht.readTemperature(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查是否有读取失败并提前退出（以便重试）</span></span><br><span class="line">  <span class="keyword">if</span> (isnan(h) || isnan(t) || isnan(f)) &#123;</span><br><span class="line">    Serial.println(F(<span class="string">&quot;Failed to read from DHT sensor!&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Compute heat index in Fahrenheit (the default)</span></span><br><span class="line">  <span class="type">float</span> hif = dht.computeHeatIndex(f, h);</span><br><span class="line">  <span class="comment">// Compute heat index in Celsius (isFahreheit = false)</span></span><br><span class="line">  <span class="type">float</span> hic = dht.computeHeatIndex(t, h, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  Serial.print(F(<span class="string">&quot;Humidity: &quot;</span>));</span><br><span class="line">  Serial.print(h);</span><br><span class="line">  Serial.print(F(<span class="string">&quot;%  Temperature: &quot;</span>));</span><br><span class="line">  Serial.print(t);</span><br><span class="line">  Serial.print(F(<span class="string">&quot;°C &quot;</span>));</span><br><span class="line">  Serial.print(f);</span><br><span class="line">  Serial.print(F(<span class="string">&quot;°F  Heat index: &quot;</span>));</span><br><span class="line">  Serial.print(hic);</span><br><span class="line">  Serial.print(F(<span class="string">&quot;°C &quot;</span>));</span><br><span class="line">  Serial.print(hif);</span><br><span class="line">  Serial.println(F(<span class="string">&quot;°F&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-6HW504摇杆的使用"><a href="#2-6HW504摇杆的使用" class="headerlink" title="2.6HW504摇杆的使用"></a>2.6HW504摇杆的使用</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072342962.png"/></div></div>

<p>引脚说明<br>GND    地<br>5V    电源5V<br>SW    按键（数字量）<br>VRX    X轴 （模拟量）<br>VRY    Y轴 （模拟量）<br>1.输入电压范围：直流3.3V 至 5V。<br>2.输出信号：模块特设二路模拟输出和一路数字输出接口，输出值分别对应（X，Y）双轴偏移量，其类型为模拟量；按键表示用户是否在Z轴上按下，其类型为数字开关量<br>VRx，VRy （X、Y轴）为模拟输入信号，连接到模拟IO口A0<del>A7。<br>VRx，VRy 的值：从 0 ~ 1023 分别代表 左</del>右，上~下。中间值为512。<br>SW （Z轴）是数字输入信号，连接到数字端口，并启用上拉电阻。<br>SW 的值：1代表未按下，0代表按下。<br>实验这里VRx接A0，VRy接A1，SW接D6   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"> pinMode(<span class="number">6</span>, INPUT_PULLUP);</span><br><span class="line"> Serial.begin(<span class="number">115200</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span>&#123;</span><br><span class="line"> value = analogRead(A0);</span><br><span class="line"> Serial.print(<span class="string">&quot;X:&quot;</span>);</span><br><span class="line"> Serial.print(value, DEC);</span><br><span class="line"> value = analogRead(A1);</span><br><span class="line"> Serial.print(<span class="string">&quot; | Y:&quot;</span>);</span><br><span class="line"> Serial.print(value, DEC);</span><br><span class="line"> value = digitalRead(<span class="number">6</span>);</span><br><span class="line"> Serial.print(<span class="string">&quot; | Z: &quot;</span>);</span><br><span class="line"> Serial.println(value, DEC);</span><br><span class="line"> delay(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072342896.png"/></div></div>

<h3 id="2-7WIFI模块的使用"><a href="#2-7WIFI模块的使用" class="headerlink" title="2.7WIFI模块的使用"></a>2.7WIFI模块的使用</h3><p>这里我们使用的是4Pin的ESP8266模块,这里只做简单的介绍，具体可后面学习ESP32.ESP8266模块内置TCP&#x2F;IP协议，能够实现串口与WIFI之间的转换。该模块有三种工作WIFI模式，STA,AP,STA+AP.<br>STA,客户端模式，可连接其他WIFI,手机等设施实现对设备的远程连接。<br>AP，接入点模式，模块作为WIFi热点。<br>STA+AP,混合模式。   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;SoftwareSerial.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rxPin 2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> txPin 3</span></span><br><span class="line"></span><br><span class="line">SoftwareSerial <span class="title function_">ESP8266</span><span class="params">(rxPin,txPin)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// put your setup code here, to run once:</span></span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">  ESP8266.begin(<span class="number">115200</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">  <span class="keyword">if</span>(ESP8266.available())</span><br><span class="line">  Serial.write(ESP8266.read());</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(Serial.available())</span><br><span class="line">  ESP8266.write(Serial.read());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试，在串口里输入AT,会返回OK;</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072343715.png"/></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072344922.png"/></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072344992.png"/></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409072344397.png"/></div></div>

<h3 id="2-8其他"><a href="#2-8其他" class="headerlink" title="2.8	其他"></a>2.8	其他</h3><p>Arduino uno的模块还有蓝牙模块等，不过感觉有些鸡肋，使用uno的板子搭配这些模块，不如直接买esp32.所以一些无线通讯的模块就不介绍了。<br>Arduino的外设很丰富，这里就不多介绍了。      </p>
<h2 id="第三章电机的驱动"><a href="#第三章电机的驱动" class="headerlink" title="第三章	电机的驱动"></a>第三章	电机的驱动</h2><h3 id="3-1PWM波的认识"><a href="#3-1PWM波的认识" class="headerlink" title="3.1PWM波的认识"></a>3.1PWM波的认识</h3><p>PWM（Pulse Width Modulation，脉宽调制）是一种用于模拟信号和功率控制的技术，通过改变脉冲的宽度来调节信号的平均电压或功率.<br>PWM 信号在一定周期内以高电平和低电平交替出现，通过改变高电平的持续时间（占空比）来实现对输出电压或功率的调节。<br>应用场景有电机控制，LED调光，电源转换和通信等。<br> <div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409122306191.png"/></div></div><br>PWM的重要参数有，<br>-	频率（Frequency）：频率的选择取决于具体应用。例如，电机控制通常使用几千赫兹的频率，而 LED 调光可能使用几百赫兹到几千赫兹。<br>-	占空比（Duty Cycle）：占空比是指高电平时间相对于一个周期的比例，通常用百分比表示<br>-	分辨率（Resolution）：分辨率是指占空比可调节的最小步进，通常与控制器的位数有关。例如，8 位分辨率的 PWM 控制器可以将占空比调整到 256 个不同的级别。<br>-	电压幅度（Voltage Amplitude）：PWM 信号的高电平和低电平的电压值。高电平通常是电源电压（如 5V 或 3.3V），低电平通常是 0V。</p>
<p>一般而言，要特别注意频率，频率过低，在驱动电机时可能出现异常，电机哮鸣。一般电机是需要较高频率的PWM信号控制.<br>单片机的PWM一般作为信号使用，驱动一些小功率LED时，可作为电源使用。</p>
<h3 id="3-2-PWM波驱动小功率直流电机"><a href="#3-2-PWM波驱动小功率直流电机" class="headerlink" title="3.2 PWM波驱动小功率直流电机"></a>3.2 PWM波驱动小功率直流电机</h3><p>我们在前面学习到，UNO的数字引脚上有几个特定引脚可以输出PWM波，分别为3,5,6,9,10,11.但是这种方式 PWM 信号的频率是固定的默认值，引脚上的 PWM 信号频率约为490 Hz，在 Uno板上，引脚5和6的频率约为980Hz。   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">define</span> analogPin 3 <span class="comment">// 引脚命名</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  pinMode(analogPin,OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  analogWrite(analogPin,<span class="number">100</span>);   <span class="comment">// 输出PWM，占空比为 100/255</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过这种方法产生的PWM波频率过低，在驱动电机时可能出现异常。因此需要输出更高频率的PWM信号。<br>此时，小功率的直流电机一端接GND,一端接3号引脚也是可以驱动的，通过调节占空比即可调节速率。<br>为了使PWM的发生不占用主进程，这里使用定时器来操作。   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过一个除数来分频给定的 PWM 引脚频率。</span></span><br><span class="line"><span class="comment"> * 生成的频率等于基频除以给定的除数：</span></span><br><span class="line"><span class="comment"> *   – 基频：</span></span><br><span class="line"><span class="comment"> *      o 引脚 3、9、10 和 11 的基频是 31250 Hz。</span></span><br><span class="line"><span class="comment"> *      o 引脚 5 和 6 的基频是 62500 Hz。</span></span><br><span class="line"><span class="comment"> *   – 除数：</span></span><br><span class="line"><span class="comment"> *      o 引脚 5、6、9 和 10 可用的除数有：1、8、64、256 和 1024。</span></span><br><span class="line"><span class="comment"> *      o 引脚 3 和 11 可用的除数有：1、8、32、64、128、256 和 1024。</span></span><br><span class="line"><span class="comment"> * PWM 频率成对关联。如果一对中的一个改变，另一个也会改变以匹配：</span></span><br><span class="line"><span class="comment"> *   – 引脚 5 和 6 在定时器0上成对</span></span><br><span class="line"><span class="comment"> *   – 引脚 9 和 10 在定时器1上成对</span></span><br><span class="line"><span class="comment"> *   – 引脚 3 和 11 在定时器2上成对</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 请注意，此函数会对其他使用定时器的内容产生副作用：</span></span><br><span class="line"><span class="comment"> *   – 改变引脚 3、5、6 或 11 可能会导致 delay() 和 millis() 函数停止工作。其他与定时相关的函数也可能受到影响。</span></span><br><span class="line"><span class="comment"> *   – 改变引脚 9 或 10 会导致 Servo 库无法正常工作。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 感谢 Arduino 论坛的 macegr 提供的 PWM 频率除数文档。他的帖子可以在以下链接查看：</span></span><br><span class="line"><span class="comment"> *   http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1235060559/0#4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// Set pin 6’s PWM frequency to 62500 Hz (62500/1 = 62500)</span></span><br><span class="line"><span class="comment">// Note that the base frequency for pins 5 and 6 is 62500 Hz</span></span><br><span class="line">  setPwmFrequency(<span class="number">6</span>, <span class="number">1</span>);</span><br><span class="line">  analogWrite(<span class="number">6</span>,<span class="number">124</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">setPwmFrequency</span><span class="params">(<span class="type">int</span> pin, <span class="type">int</span> divisor)</span> &#123;</span><br><span class="line">  byte mode;</span><br><span class="line">  <span class="keyword">if</span>(pin == <span class="number">5</span> || pin == <span class="number">6</span> || pin == <span class="number">9</span> || pin == <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span>(divisor) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>: mode = <span class="number">0x01</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">8</span>: mode = <span class="number">0x02</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">64</span>: mode = <span class="number">0x03</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">256</span>: mode = <span class="number">0x04</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1024</span>: mode = <span class="number">0x05</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>: <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(pin == <span class="number">5</span> || pin == <span class="number">6</span>) &#123;</span><br><span class="line">      TCCR0B = TCCR0B &amp; <span class="number">0b11111000</span> | mode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      TCCR1B = TCCR1B &amp; <span class="number">0b11111000</span> | mode;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(pin == <span class="number">3</span> || pin == <span class="number">11</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span>(divisor) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>: mode = <span class="number">0x01</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">8</span>: mode = <span class="number">0x02</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">32</span>: mode = <span class="number">0x03</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">64</span>: mode = <span class="number">0x04</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">128</span>: mode = <span class="number">0x05</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">256</span>: mode = <span class="number">0x06</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1024</span>: mode = <span class="number">0x07</span>; <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>: <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    TCCR2B = TCCR2B &amp; <span class="number">0b11111000</span> | mode;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示波器测量频率为62.5KHZ,改变下面的124,改变占空比，占空比0-255。</p>
<blockquote>
<p>analogWrite(6,124);</p>
</blockquote>
<h3 id="3-3L298N的使用与双路电机驱动"><a href="#3-3L298N的使用与双路电机驱动" class="headerlink" title="3.3	L298N的使用与双路电机驱动"></a>3.3	L298N的使用与双路电机驱动</h3><div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409122308389.png"/></div></div>

<p>供电方式：<br>-	7-12V电源走VCC供电，电源上的跳线帽连接，5v的位置不用接电源，该位置可输出一个5v，可用于给单片机供电。<br>-	当输入电压大于12v时，需要拔掉电源旁的跳线帽，5V端需要接入5v的电压，GND还是接GND<br>-	接入5V电源， L298N的12V和5V都接5V供电。</p>
<p>注意：GND不但要接驱动电源的GND，一定要从这里再引出一根GND和单片机或者系统的GND相连,使电压有参考电平</p>
<p>控制引脚</p>
<ol>
<li><p>IN1 &amp; IN2 电机驱动器A的输入引脚，控制电机A转动及旋转角度<br> IN1输入高电平HIGH，IN2输入低电平LOW，对应电机A正转<br> IN1输入低电平LOW，IN2输入高电平HIGH，对应电机A反转<br> IN1、IN2同时输入高电平HIGH或低电平LOW，对应电机A停止转动<br> 调速就是改变IN1、IN2高电平的占空比（需插上ENA处跳帽）</p>
</li>
<li><p>IN3 &amp; IN4 电机驱动器B的输入引脚，控制电机B转动及旋转角度<br> IN3输入高电平HIGH，IN4输入低电平LOW，对应电机B正转<br> IN3输入低电平LOW，IN4输入高电平HIGH，对应电机B反转<br> IN3、IN4同时输入高电平HIGH或低电平LOW，对应电机B停止转动<br>调速就是改变IN3、IN4高电平的占空比（需插上ENB处跳帽）</p>
</li>
</ol>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://liwuyou66.oss-cn-beijing.aliyuncs.com/img/202409122309006.png"/></div></div>
<p>控制有两种方式，以一边电机为例：<br>1.	ENA,引脚通过跳帽线与+5V连接，IN1悬空或接GND,IN2输入PWM信号。<br>2.	ENA拔掉跳帽线，输入PWM信号，IN1接1，IN2接0。改变IN1与IN2的值就可以停止或正反转。</p>
<h3 id="3-4舵机的驱动"><a href="#3-4舵机的驱动" class="headerlink" title="3.4舵机的驱动"></a>3.4舵机的驱动</h3><p>普通舵机有3根线：GND（黑）、VCC（红）、Signal（黄），一般情况下，建议为舵机单独供电，此处实验为了图方便，用arduino为舵机供电。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">servo类下有以下成员函数</span></span><br><span class="line"><span class="comment">attach()//连接舵机</span></span><br><span class="line"><span class="comment">write()//角度控制</span></span><br><span class="line"><span class="comment">writeMicroseconds()//</span></span><br><span class="line"><span class="comment">read()//读上一次舵机转动角度</span></span><br><span class="line"><span class="comment">attached()//</span></span><br><span class="line"><span class="comment">detach()//断开舵机连接</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Servo.h&gt;</span> </span></span><br><span class="line">Servo myservo;  <span class="comment">//创建一个舵机控制对象</span></span><br><span class="line">                          <span class="comment">// 使用Servo类最多可以控制8个舵机</span></span><br><span class="line"><span class="type">int</span> pos = <span class="number">0</span>;    <span class="comment">// 该变量用与存储舵机角度位置</span></span><br><span class="line"><span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~华丽的分割线~~~~~~~~~~~~~~~~~~~~~~~~~~ */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> </span><br><span class="line">&#123; </span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line">  myservo.attach(<span class="number">9</span>);  <span class="comment">// 该舵机由arduino第九脚控制</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~华丽的分割线 ~~~~~~~~~~~~~~~~~~~~~~~~~~ */</span> </span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> </span><br><span class="line">&#123; </span><br><span class="line">  myservo.write(<span class="number">0</span>); <span class="comment">// 复位</span></span><br><span class="line">  <span class="keyword">for</span>(pos = <span class="number">0</span>; pos &lt; <span class="number">180</span>; pos += <span class="number">1</span>)  <span class="comment">// 从0度到180度运动 </span></span><br><span class="line">  &#123;                                                     <span class="comment">// 每次步进一度</span></span><br><span class="line">    myservo.write(pos);        <span class="comment">// 指定舵机转向的角度</span></span><br><span class="line">    delay(<span class="number">15</span>);                       <span class="comment">// 等待15ms让舵机到达指定位置</span></span><br><span class="line">    </span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">for</span>(pos = <span class="number">180</span>; pos&gt;=<span class="number">1</span>; pos-=<span class="number">1</span>)   <span class="comment">//从180度到0度运动  </span></span><br><span class="line">  &#123;                                </span><br><span class="line">    myservo.write(pos);         <span class="comment">// 指定舵机转向的角度 </span></span><br><span class="line">    delay(<span class="number">15</span>);                        <span class="comment">// 等待15ms让舵机到达指定位置 </span></span><br><span class="line">    Serial.println(myservo.read());</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-5-其他"><a href="#3-5-其他" class="headerlink" title="3.5 其他"></a>3.5 其他</h3><p>还有无刷电机，步进电机，arduino驱动这些电机设备时，一般不直接驱动，中间都会连接一个驱动模块，上文的L298N就是一种驱动模块。</p>
<h2 id="第四章成品制作"><a href="#第四章成品制作" class="headerlink" title="第四章	成品制作"></a>第四章	成品制作</h2><h3 id="4-1可以制作哪些？如何制作？"><a href="#4-1可以制作哪些？如何制作？" class="headerlink" title="4.1可以制作哪些？如何制作？"></a>4.1可以制作哪些？如何制作？</h3><p>个人DIY时，除了学习单片机外，还需要学习PCB焊接和3D打印的一些知识，并且熟悉一些常见的DIY材料，丙烯颜料，环氧树脂等，以及钳子，等常见工具的使用。当然最最最重要的是热爱。<br>基于UNO，我们可以做出很多有意思的作 品，小时钟，个性灯等，在开源社区有很多有意思的作品，可以自行搜索。</p>



<div class="article-footer reveal fs14">
    <section id="license">
      <div class="header"><span>License</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    </div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">Newer</div><a href="/2024/09/06/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/">自动控制原理</a></div><div class="item" id="next"><div class="note">Older</div><a href="/2024/09/04/%E6%97%A0%E8%81%8A%E7%9A%84%E7%9B%92%E5%AD%90-%E4%BA%8C%E4%BB%A3/">无聊的盒子-二代</a></div></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>本站由 <a href="/">@anonymity</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.20.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.20.0';
  stellar.config = {
    date_suffix: {
      just: 'Just',
      min: 'minutes ago',
      hour: 'hours ago',
      day: 'days ago',
      month: 'months ago',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
